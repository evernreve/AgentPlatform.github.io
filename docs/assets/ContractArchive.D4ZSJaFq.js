import{_ as R,c as M,o as b,a as F,b as e,w as a,r as u,d as o,t as d,e as T,g as C,h as D}from"./index.CKcpLAnl.js";const S={name:"ContractArchive",data(){return{filters:{tenantId:"",agentName:"",contractId:"",contractType:"",signDate:["",""]},contractData:[{tenantId:"TNT001",tenantName:"租户A",contractId:"CT00120240115",agentId:"AGT001",agentName:"北京代理商有限公司",contractType:"新签",contractRelation:"tenant_agent",contractAttribute:"新协议",signingSubject:"北京商企科技有限公司",signDate:"2024-01-15",expireDate:"2025-01-14",effectiveDate:"2024-01-15",status:"active",signPerson:"张经理",contractValue:"¥1,200,000"},{tenantId:"TNT001",tenantName:"租户A",contractId:"CT00220240220",agentId:"AGT001",agentName:"北京代理商有限公司",contractType:"续签",contractRelation:"agent_merchant",contractAttribute:"补充协议",signingSubject:"北京商企科技有限公司",signDate:"2024-02-20",expireDate:"2025-02-19",effectiveDate:"2024-02-20",status:"active",signPerson:"李经理",contractValue:"¥800,000"},{tenantId:"TNT002",tenantName:"租户B",contractId:"CT00320240310",agentId:"AGT002",agentName:"上海拓展服务商",contractType:"延期更换主体",contractRelation:"tenant",contractAttribute:"新协议",signingSubject:"上海商务服务有限公司",signDate:"2024-03-10",expireDate:"2025-03-09",effectiveDate:"2024-03-10",status:"active",signPerson:"王经理",contractValue:"¥1,500,000"},{tenantId:"TNT003",tenantName:"租户C",contractId:"CT00420240412",agentId:"AGT003",agentName:"广州合作伙伴",contractType:"其他",contractRelation:"tenant_merchant",contractAttribute:"补充协议",signingSubject:"广州商务咨询有限公司",signDate:"2024-04-12",expireDate:"2025-04-11",effectiveDate:"2024-04-12",status:"active",signPerson:"赵经理",contractValue:"¥950,000"}],pagination:{currentPage:1,pageSize:10,total:4},detailDrawerVisible:!1,selectedContract:{},contractDialogVisible:!1,contractFormTitle:"",isEdit:!1,contractForm:{contractId:"",contractType:"",contractAttribute:"",contractRelation:"",tenantId:"",tenantName:"",agentId:"",agentName:"",merchantId:"",merchantName:"",signingSubject:"",signDate:"",effectiveDate:"",expireDate:"",status:"",signPerson:"",contractValue:""},showTenantFields:!0,showAgentFields:!1,showMerchantFields:!1,contractFormRules:{contractId:[{required:!0,message:"请输入合同编号",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],contractType:[{required:!0,message:"请选择合同类型",trigger:"change"}],contractAttribute:[{required:!0,message:"请选择合同属性",trigger:"change"}],contractRelation:[{required:!0,message:"请选择合同签约关系",trigger:"change"}],tenantId:[{required:!0,message:"请输入租户ID",trigger:"blur"}],tenantName:[{required:!0,message:"请输入租户名称",trigger:"blur"}],agentId:[{required:!0,message:"请输入代理商ID",trigger:"blur"}],agentName:[{required:!0,message:"请输入代理商名称",trigger:"blur"}],signingSubject:[{required:!0,message:"请输入签约主体",trigger:"blur"}]}}},methods:{handleSearch(){console.log("搜索条件:",this.filters)},handleReset(){this.filters={tenantId:"",agentName:"",contractId:"",contractType:"",signDate:["",""]}},handleExport(){this.$message.success("正在导出合同数据...")},handleAddContract(){this.isEdit=!1,this.contractFormTitle="新增合同",this.resetContractForm(),this.contractDialogVisible=!0},handleEditContract(r){this.isEdit=!0,this.contractFormTitle="编辑合同",this.fillContractForm(r),this.contractDialogVisible=!0},handleViewContract(r){this.selectedContract=r,this.detailDrawerVisible=!0},handleDownloadContract(r){this.$message.info(`正在下载合同: ${r.contractId}`)},handleCloseDetail(){this.detailDrawerVisible=!1},handleSizeChange(r){this.pagination.pageSize=r},handleCurrentChange(r){this.pagination.currentPage=r},handleContractRelationChange(r){switch(this.showTenantFields=!1,this.showAgentFields=!1,this.showMerchantFields=!1,r){case"tenant":this.showTenantFields=!0;break;case"tenant_agent":this.showTenantFields=!0,this.showAgentFields=!0;break;case"agent_merchant":this.showAgentFields=!0,this.showMerchantFields=!0;break;case"tenant_merchant":this.showTenantFields=!0,this.showMerchantFields=!0;break;default:this.showTenantFields=!0}},resetContractForm(){this.contractForm={contractId:"",contractType:"",contractAttribute:"",contractRelation:"",tenantId:"",tenantName:"",agentId:"",agentName:"",merchantId:"",merchantName:"",signingSubject:"",signDate:"",effectiveDate:"",expireDate:"",status:"",signPerson:"",contractValue:""},this.showTenantFields=!0,this.showAgentFields=!1,this.showMerchantFields=!1},fillContractForm(r){this.contractForm={...r}},handleCloseContractForm(){this.contractDialogVisible=!1,this.resetContractForm()},handleSubmitContract(){this.$refs.contractFormRef.validate(r=>{if(r){if(this.isEdit){const l=this.contractData.findIndex(_=>_.contractId===this.contractForm.contractId);l!==-1&&(this.contractData[l]={...this.contractForm},this.$message.success("合同更新成功"))}else{if(this.contractData.some(_=>_.contractId===this.contractForm.contractId)){this.$message.error("合同编号已存在");return}this.contractData.push({...this.contractForm}),this.$message.success("合同新增成功")}this.handleCloseContractForm()}else return this.$message.error("请完善表单信息"),!1})},getRelationTagType(r){return{tenant:"primary",tenant_agent:"success",agent_merchant:"warning",tenant_merchant:"danger"}[r]||"info"},getRelationLabel(r){return{tenant:"租户",tenant_agent:"租户代理商",agent_merchant:"代理商商户",tenant_merchant:"租户商户"}[r]||r},getTypeTagType(r){return{新签:"primary",续签:"success",延期更换主体:"warning",其他:"info"}[r]||"info"},getAttributeTagType(r){return{新协议:"primary",补充协议:"warning"}[r]||"info"}}},U={class:"contract-archive"},z={class:"drawer-content"},j={class:"dialog-footer"};function P(r,l,_,E,t,i){const s=u("el-option"),V=u("el-select"),c=u("el-form-item"),g=u("el-input"),y=u("el-date-picker"),f=u("el-button"),I=u("el-form"),v=u("el-card"),p=u("el-table-column"),h=u("el-tag"),N=u("el-table"),A=u("el-pagination"),m=u("el-descriptions-item"),x=u("el-descriptions"),k=u("el-drawer"),Y=u("el-dialog");return b(),M("div",U,[l[33]||(l[33]=F("div",{class:"page-header"},[F("h3",null,"合同签约档案")],-1)),e(v,{class:"filter-card"},{default:a(()=>[e(I,{inline:!0,model:t.filters,class:"filter-form"},{default:a(()=>[e(c,{label:"租户"},{default:a(()=>[e(V,{modelValue:t.filters.tenantId,"onUpdate:modelValue":l[0]||(l[0]=n=>t.filters.tenantId=n),placeholder:"请选择租户",style:{width:"150px"}},{default:a(()=>[e(s,{label:"全部租户",value:""}),e(s,{label:"租户A",value:"TNT001"}),e(s,{label:"租户B",value:"TNT002"}),e(s,{label:"租户C",value:"TNT003"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"代理商"},{default:a(()=>[e(g,{modelValue:t.filters.agentName,"onUpdate:modelValue":l[1]||(l[1]=n=>t.filters.agentName=n),placeholder:"请输入代理商名称",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(c,{label:"合同编号"},{default:a(()=>[e(g,{modelValue:t.filters.contractId,"onUpdate:modelValue":l[2]||(l[2]=n=>t.filters.contractId=n),placeholder:"请输入合同编号",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(c,{label:"合同类型"},{default:a(()=>[e(V,{modelValue:t.filters.contractType,"onUpdate:modelValue":l[3]||(l[3]=n=>t.filters.contractType=n),placeholder:"请选择合同类型",style:{width:"120px"}},{default:a(()=>[e(s,{label:"全部",value:""}),e(s,{label:"新签",value:"新签"}),e(s,{label:"续签",value:"续签"}),e(s,{label:"延期更换主体",value:"延期更换主体"}),e(s,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"签约日期"},{default:a(()=>[e(y,{modelValue:t.filters.signDate,"onUpdate:modelValue":l[4]||(l[4]=n=>t.filters.signDate=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),e(c,null,{default:a(()=>[e(f,{type:"primary",onClick:i.handleAddContract},{default:a(()=>[...l[24]||(l[24]=[o("新增合同",-1)])]),_:1},8,["onClick"]),e(f,{type:"primary",onClick:i.handleSearch},{default:a(()=>[...l[25]||(l[25]=[o("查询",-1)])]),_:1},8,["onClick"]),e(f,{onClick:i.handleReset},{default:a(()=>[...l[26]||(l[26]=[o("重置",-1)])]),_:1},8,["onClick"]),e(f,{onClick:i.handleExport},{default:a(()=>[...l[27]||(l[27]=[o("导出",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{data:t.contractData,style:{width:"100%"},stripe:"",height:"600","highlight-current-row":""},{default:a(()=>[e(p,{prop:"tenantId",label:"租户ID",width:"120"}),e(p,{prop:"tenantName",label:"租户名称",width:"120"}),e(p,{prop:"contractId",label:"合同编号",width:"150"}),e(p,{prop:"agentId",label:"代理商ID",width:"120"}),e(p,{prop:"agentName",label:"代理商名称",width:"180"}),e(p,{prop:"contractRelation",label:"合同签约关系",width:"150"},{default:a(({row:n})=>[e(h,{type:i.getRelationTagType(n.contractRelation)},{default:a(()=>[o(d(i.getRelationLabel(n.contractRelation)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"contractType",label:"合同类型",width:"120"},{default:a(({row:n})=>[e(h,{type:i.getTypeTagType(n.contractType)},{default:a(()=>[o(d(n.contractType),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"contractAttribute",label:"合同属性",width:"120"},{default:a(({row:n})=>[e(h,{type:i.getAttributeTagType(n.contractAttribute)},{default:a(()=>[o(d(n.contractAttribute),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"signingSubject",label:"签约主体",width:"150"}),e(p,{prop:"signDate",label:"签约起始日期",width:"150"}),e(p,{prop:"expireDate",label:"签约结束日期",width:"150"}),e(p,{prop:"effectiveDate",label:"合同生效时间",width:"150"}),e(p,{label:"操作",width:"220",fixed:"right"},{default:a(({row:n})=>[e(f,{size:"small",onClick:T(w=>i.handleEditContract(n),["stop"])},{default:a(()=>[...l[28]||(l[28]=[o("编辑",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",onClick:T(w=>i.handleViewContract(n),["stop"])},{default:a(()=>[...l[29]||(l[29]=[o("查看合同",-1)])]),_:1},8,["onClick"]),e(f,{size:"small",onClick:T(w=>i.handleDownloadContract(n),["stop"])},{default:a(()=>[...l[30]||(l[30]=[o("下载",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),e(A,{class:"pagination",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange,"current-page":t.pagination.currentPage,"page-sizes":[10,20,50,100],"page-size":t.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pagination.total,style:{"margin-top":"20px","text-align":"right"}},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"]),e(k,{modelValue:t.detailDrawerVisible,"onUpdate:modelValue":l[5]||(l[5]=n=>t.detailDrawerVisible=n),size:"50%",title:`合同详情 - ${t.selectedContract.contractId}`,direction:"rtl","before-close":i.handleCloseDetail},{default:a(()=>[F("div",z,[e(x,{column:1,border:""},{default:a(()=>[e(m,{label:"合同编号"},{default:a(()=>[o(d(t.selectedContract.contractId),1)]),_:1}),e(m,{label:"租户ID"},{default:a(()=>[o(d(t.selectedContract.tenantId),1)]),_:1}),e(m,{label:"租户名称"},{default:a(()=>[o(d(t.selectedContract.tenantName),1)]),_:1}),e(m,{label:"代理商ID"},{default:a(()=>[o(d(t.selectedContract.agentId),1)]),_:1}),e(m,{label:"代理商名称"},{default:a(()=>[o(d(t.selectedContract.agentName),1)]),_:1}),e(m,{label:"合同类型"},{default:a(()=>[e(h,{type:i.getTypeTagType(t.selectedContract.contractType)},{default:a(()=>[o(d(t.selectedContract.contractType),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"合同属性"},{default:a(()=>[e(h,{type:i.getAttributeTagType(t.selectedContract.contractAttribute)},{default:a(()=>[o(d(t.selectedContract.contractAttribute),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"合同签约关系"},{default:a(()=>[e(h,{type:i.getRelationTagType(t.selectedContract.contractRelation)},{default:a(()=>[o(d(i.getRelationLabel(t.selectedContract.contractRelation)),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"签约主体"},{default:a(()=>[o(d(t.selectedContract.signingSubject),1)]),_:1}),e(m,{label:"签约起始日期"},{default:a(()=>[o(d(t.selectedContract.signDate),1)]),_:1}),e(m,{label:"签约结束日期"},{default:a(()=>[o(d(t.selectedContract.expireDate),1)]),_:1}),e(m,{label:"合同生效时间"},{default:a(()=>[o(d(t.selectedContract.effectiveDate),1)]),_:1}),e(m,{label:"合同状态"},{default:a(()=>[e(h,{type:t.selectedContract.status==="active"?"success":"warning"},{default:a(()=>[o(d(t.selectedContract.status==="active"?"生效中":"已过期"),1)]),_:1},8,["type"])]),_:1}),e(m,{label:"签约人"},{default:a(()=>[o(d(t.selectedContract.signPerson),1)]),_:1}),e(m,{label:"签约金额"},{default:a(()=>[o(d(t.selectedContract.contractValue),1)]),_:1})]),_:1})])]),_:1},8,["modelValue","title","before-close"]),e(Y,{title:t.contractFormTitle,modelValue:t.contractDialogVisible,"onUpdate:modelValue":l[23]||(l[23]=n=>t.contractDialogVisible=n),width:"60%","before-close":i.handleCloseContractForm},{footer:a(()=>[F("span",j,[e(f,{onClick:i.handleCloseContractForm},{default:a(()=>[...l[31]||(l[31]=[o("取消",-1)])]),_:1},8,["onClick"]),e(f,{type:"primary",onClick:i.handleSubmitContract},{default:a(()=>[...l[32]||(l[32]=[o("确定",-1)])]),_:1},8,["onClick"])])]),default:a(()=>[e(I,{model:t.contractForm,rules:t.contractFormRules,ref:"contractFormRef","label-width":"140px"},{default:a(()=>[e(c,{label:"合同编号",prop:"contractId"},{default:a(()=>[e(g,{modelValue:t.contractForm.contractId,"onUpdate:modelValue":l[6]||(l[6]=n=>t.contractForm.contractId=n),disabled:t.isEdit,placeholder:"请输入合同编号"},null,8,["modelValue","disabled"])]),_:1}),e(c,{label:"合同类型",prop:"contractType"},{default:a(()=>[e(V,{modelValue:t.contractForm.contractType,"onUpdate:modelValue":l[7]||(l[7]=n=>t.contractForm.contractType=n),placeholder:"请选择合同类型",style:{width:"100%"}},{default:a(()=>[e(s,{label:"新签",value:"新签"}),e(s,{label:"续签",value:"续签"}),e(s,{label:"延期更换主体",value:"延期更换主体"}),e(s,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"合同属性",prop:"contractAttribute"},{default:a(()=>[e(V,{modelValue:t.contractForm.contractAttribute,"onUpdate:modelValue":l[8]||(l[8]=n=>t.contractForm.contractAttribute=n),placeholder:"请选择合同属性",style:{width:"100%"}},{default:a(()=>[e(s,{label:"新协议",value:"新协议"}),e(s,{label:"补充协议",value:"补充协议"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"合同签约关系",prop:"contractRelation"},{default:a(()=>[e(V,{modelValue:t.contractForm.contractRelation,"onUpdate:modelValue":l[9]||(l[9]=n=>t.contractForm.contractRelation=n),placeholder:"请选择合同签约关系",onChange:i.handleContractRelationChange,style:{width:"100%"}},{default:a(()=>[e(s,{label:"租户",value:"tenant"}),e(s,{label:"租户代理商",value:"tenant_agent"}),e(s,{label:"代理商商户",value:"agent_merchant"}),e(s,{label:"租户商户",value:"tenant_merchant"})]),_:1},8,["modelValue","onChange"])]),_:1}),t.showTenantFields?(b(),C(c,{key:0,label:"租户ID",prop:"tenantId"},{default:a(()=>[e(g,{modelValue:t.contractForm.tenantId,"onUpdate:modelValue":l[10]||(l[10]=n=>t.contractForm.tenantId=n),placeholder:"请输入租户ID"},null,8,["modelValue"])]),_:1})):D("",!0),t.showTenantFields?(b(),C(c,{key:1,label:"租户名称",prop:"tenantName"},{default:a(()=>[e(g,{modelValue:t.contractForm.tenantName,"onUpdate:modelValue":l[11]||(l[11]=n=>t.contractForm.tenantName=n),placeholder:"请输入租户名称"},null,8,["modelValue"])]),_:1})):D("",!0),t.showAgentFields?(b(),C(c,{key:2,label:"代理商ID",prop:"agentId"},{default:a(()=>[e(g,{modelValue:t.contractForm.agentId,"onUpdate:modelValue":l[12]||(l[12]=n=>t.contractForm.agentId=n),placeholder:"请输入代理商ID"},null,8,["modelValue"])]),_:1})):D("",!0),t.showAgentFields?(b(),C(c,{key:3,label:"代理商名称",prop:"agentName"},{default:a(()=>[e(g,{modelValue:t.contractForm.agentName,"onUpdate:modelValue":l[13]||(l[13]=n=>t.contractForm.agentName=n),placeholder:"请输入代理商名称"},null,8,["modelValue"])]),_:1})):D("",!0),t.showMerchantFields?(b(),C(c,{key:4,label:"商户ID",prop:"merchantId"},{default:a(()=>[e(g,{modelValue:t.contractForm.merchantId,"onUpdate:modelValue":l[14]||(l[14]=n=>t.contractForm.merchantId=n),placeholder:"请输入商户ID"},null,8,["modelValue"])]),_:1})):D("",!0),t.showMerchantFields?(b(),C(c,{key:5,label:"商户名称",prop:"merchantName"},{default:a(()=>[e(g,{modelValue:t.contractForm.merchantName,"onUpdate:modelValue":l[15]||(l[15]=n=>t.contractForm.merchantName=n),placeholder:"请输入商户名称"},null,8,["modelValue"])]),_:1})):D("",!0),e(c,{label:"签约主体",prop:"signingSubject"},{default:a(()=>[e(g,{modelValue:t.contractForm.signingSubject,"onUpdate:modelValue":l[16]||(l[16]=n=>t.contractForm.signingSubject=n),placeholder:"请输入签约主体"},null,8,["modelValue"])]),_:1}),e(c,{label:"签约金额",prop:"contractValue"},{default:a(()=>[e(g,{modelValue:t.contractForm.contractValue,"onUpdate:modelValue":l[17]||(l[17]=n=>t.contractForm.contractValue=n),placeholder:"请输入签约金额"},null,8,["modelValue"])]),_:1}),e(c,{label:"签约起始日期",prop:"signDate"},{default:a(()=>[e(y,{modelValue:t.contractForm.signDate,"onUpdate:modelValue":l[18]||(l[18]=n=>t.contractForm.signDate=n),type:"date",placeholder:"选择签约日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"合同生效时间",prop:"effectiveDate"},{default:a(()=>[e(y,{modelValue:t.contractForm.effectiveDate,"onUpdate:modelValue":l[19]||(l[19]=n=>t.contractForm.effectiveDate=n),type:"date",placeholder:"选择生效日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"签约结束日期",prop:"expireDate"},{default:a(()=>[e(y,{modelValue:t.contractForm.expireDate,"onUpdate:modelValue":l[20]||(l[20]=n=>t.contractForm.expireDate=n),type:"date",placeholder:"选择结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(c,{label:"签约人",prop:"signPerson"},{default:a(()=>[e(g,{modelValue:t.contractForm.signPerson,"onUpdate:modelValue":l[21]||(l[21]=n=>t.contractForm.signPerson=n),placeholder:"请输入签约人"},null,8,["modelValue"])]),_:1}),e(c,{label:"合同状态",prop:"status"},{default:a(()=>[e(V,{modelValue:t.contractForm.status,"onUpdate:modelValue":l[22]||(l[22]=n=>t.contractForm.status=n),placeholder:"请选择合同状态",style:{width:"100%"}},{default:a(()=>[e(s,{label:"生效中",value:"active"}),e(s,{label:"已过期",value:"expired"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue","before-close"])])}const B=R(S,[["render",P],["__scopeId","data-v-a0a323ec"]]);export{B as default};
