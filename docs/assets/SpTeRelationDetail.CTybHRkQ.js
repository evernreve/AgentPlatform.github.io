import{_ as C,c as _,o as p,a as r,g as y,b as e,r as s,w as t,t as d,d as l,h as I,F as w,f as A}from"./index.DkWATejZ.js";const E={name:"SpTeRelationDetail",data(){return{spIdentity:"PP",tenantIdentity:"TP",spName:"IPL",tenantName:"IPL",products:[{id:"PROD001",name:"国际交易分佣产品"},{id:"PROD002",name:"汇率返点产品"}],relationHistory:[{changeDate:"2024-01-15 10:30:00",changeType:"新建关系",beforeChange:"-",afterChange:"建立代理关系",operator:"admin",remark:"初始建立代理关系"},{changeDate:"2024-02-20 14:22:00",changeType:"产品变更",beforeChange:"国际交易分佣产品",afterChange:"国际交易分佣产品+汇率返点产品",operator:"system",remark:"新增代理产品"},{changeDate:"2024-03-10 09:15:00",changeType:"状态变更",beforeChange:"未激活",afterChange:"激活",operator:"admin",remark:"激活代理关系"}]}},computed:{isValidSpIdentity(){return this.spIdentity!=="AP"},isValidTenantIdentity(){return!0},spIdentityError(){return this.spIdentity==="AP"?`${this.spName}作为被代理方，不能具有AP身份`:""},tenantIdentityError(){return""},isRelationLegal(){return[["PP","TP"],["PP","SA"],["SA","TP"],["TP","AP"]].some(([n,g])=>n===this.spIdentity&&g===this.tenantIdentity)},relationErrorMessage(){if(!this.isRelationLegal){const m=`${this.spIdentity}->${this.tenantIdentity}`;return m==="TP->PP"?"租户提供商不能代理产品提供商":m==="SA->PP"?"服务代理不能代理产品提供商":this.spIdentity==="AP"?"代理提供商不能作为被代理方":this.tenantIdentity==="AP"&&this.spIdentity!=="TP"?"除租户提供商外，其他身份不能代理AP":"此代理关系组合不符合业务规则"}return""}},methods:{goBack(){this.$router.go(-1)}}},N={class:"sp-te-relation-detail"},v={class:"page-header"},D={style:{"margin-top":"10px","font-size":"12px",color:"#909399"}},R={class:"identity-display"},S={class:"identity-display"};function B(m,n,g,V,i,o){const T=s("el-page-header"),f=s("el-alert"),a=s("el-descriptions-item"),u=s("el-tag"),h=s("el-tooltip"),k=s("el-descriptions"),b=s("el-card"),c=s("el-table-column"),x=s("el-table");return p(),_("div",N,[r("div",v,[e(T,{onBack:o.goBack,content:"代理关系详情"},null,8,["onBack"])]),o.isRelationLegal?(p(),y(f,{key:1,title:"此代理关系符合业务规则",type:"success","show-icon":"",style:{"margin-bottom":"20px"}})):(p(),y(f,{key:0,title:o.relationErrorMessage,type:"error","show-icon":"",style:{"margin-bottom":"20px"}},{default:t(()=>[r("div",null,[r("p",null,d(o.relationErrorMessage),1),r("p",D," 当前关系："+d(i.spIdentity)+" → "+d(i.tenantIdentity),1)])]),_:1},8,["title"])),e(b,{class:"detail-card"},{default:t(()=>[e(k,{column:2,border:""},{default:t(()=>[e(a,{label:"被代理方"},{default:t(()=>[l(d(i.spName),1)]),_:1}),e(a,{label:"被代理方标识"},{default:t(()=>[...n[0]||(n[0]=[l("SP001",-1)])]),_:1}),e(a,{label:"被代理方身份"},{default:t(()=>[r("div",R,[e(u,{type:"primary"},{default:t(()=>[l(d(i.spIdentity),1)]),_:1}),o.isValidSpIdentity?I("",!0):(p(),y(h,{key:0,content:o.spIdentityError,placement:"right"},{default:t(()=>[...n[1]||(n[1]=[r("i",{class:"el-icon-warning",style:{color:"#E6A23C","margin-left":"5px"}},null,-1)])]),_:1},8,["content"]))])]),_:1}),e(a,{label:"代理方名称"},{default:t(()=>[l(d(i.tenantName),1)]),_:1}),e(a,{label:"代理方标识"},{default:t(()=>[...n[2]||(n[2]=[l("TNT001",-1)])]),_:1}),e(a,{label:"代理方身份"},{default:t(()=>[r("div",S,[e(u,{type:"success"},{default:t(()=>[l(d(i.tenantIdentity),1)]),_:1}),o.isValidTenantIdentity?I("",!0):(p(),y(h,{key:0,content:o.tenantIdentityError,placement:"right"},{default:t(()=>[...n[3]||(n[3]=[r("i",{class:"el-icon-warning",style:{color:"#E6A23C","margin-left":"5px"}},null,-1)])]),_:1},8,["content"]))])]),_:1}),e(a,{label:"是否同名"},{default:t(()=>[e(u,{type:"success"},{default:t(()=>[...n[4]||(n[4]=[l("是",-1)])]),_:1})]),_:1}),e(a,{label:"代理产品"},{default:t(()=>[(p(!0),_(w,null,A(i.products,P=>(p(),_("div",{key:P.id,class:"product-item"},[e(u,{size:"small",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:t(()=>[l(d(P.name),1)]),_:2},1024)]))),128))]),_:1}),e(a,{label:"状态"},{default:t(()=>[e(u,{type:"success"},{default:t(()=>[...n[5]||(n[5]=[l("激活",-1)])]),_:1})]),_:1}),e(a,{label:"创建时间"},{default:t(()=>[...n[6]||(n[6]=[l("2024-01-15",-1)])]),_:1}),e(a,{label:"最后更新时间"},{default:t(()=>[...n[7]||(n[7]=[l("2024-01-15",-1)])]),_:1})]),_:1})]),_:1}),e(b,{class:"relation-history-card",style:{"margin-top":"20px"}},{header:t(()=>[...n[8]||(n[8]=[r("div",{class:"card-header"},[r("span",null,"关系变更历史")],-1)])]),default:t(()=>[e(x,{data:i.relationHistory,style:{width:"100%"}},{default:t(()=>[e(c,{prop:"changeDate",label:"变更时间",width:"180"}),e(c,{prop:"changeType",label:"变更类型",width:"120"}),e(c,{prop:"beforeChange",label:"变更前",width:"200"}),e(c,{prop:"afterChange",label:"变更后",width:"200"}),e(c,{prop:"operator",label:"操作人",width:"120"}),e(c,{prop:"remark",label:"备注"})]),_:1},8,["data"])]),_:1})])}const M=C(E,[["render",B],["__scopeId","data-v-82aa2380"]]);export{M as default};
