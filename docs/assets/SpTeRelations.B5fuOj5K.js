import{_ as w,c as T,o as c,a as t,b as a,w as l,r as p,d as r,g as h,h as S,t as P,F as V,f as z}from"./index.DkWATejZ.js";const E={name:"SpTeRelations",data(){return{filters:{spName:"",tenantName:"",productName:""},spTeRelationList:[{spName:"IPL",spIdentifier:"SP001",spIdentity:"PP",tenantName:"IPL",tenantIdentifier:"TNT001",tenantIdentity:"TP",isSameName:!0,products:[{id:"PROD001",name:"å›½é™…äº¤æ˜“åˆ†ä½£äº§å“"},{id:"PROD002",name:"æ±‡çŽ‡è¿”ç‚¹äº§å“"}],status:"active",createdAt:"2024-01-15"},{spName:"IPL",spIdentifier:"TE002",spIdentity:"PP",tenantName:"EX",tenantIdentifier:"TNT002",tenantIdentity:"SA",isSameName:!1,products:[{id:"PROD003",name:"æ±‡çŽ‡è¿”ç‚¹äº§å“"}],status:"active",createdAt:"2024-02-20"},{spName:"BB",spIdentifier:"SP003",spIdentity:"SA",tenantName:"BB",tenantIdentifier:"TNT003",tenantIdentity:"TP",isSameName:!0,products:[{id:"PROD004",name:"è·¨å¢ƒæ”¯ä»˜åˆ†ä½£"},{id:"PROD005",name:"æµ·å¤–æ”¯ä»˜äº§å“"},{id:"PROD006",name:"è·¨å¢ƒç”µå•†æ”¯ä»˜äº§å“"}],status:"inactive",createdAt:"2024-03-10"},{spName:"EX",spIdentifier:"SP004",spIdentity:"AP",tenantName:"KUN",tenantIdentifier:"TNT004",tenantIdentity:"TP",isSameName:!1,products:[{id:"PROD007",name:"æµ·å¤–æ”¯ä»˜äº§å“"}],status:"active",createdAt:"2024-04-05"},{spName:"PP2",spIdentifier:"TE005",spIdentity:"PP",tenantName:"PP2",tenantIdentifier:"TNT005",tenantIdentity:"SA",isSameName:!0,products:[{id:"PROD008",name:"è·¨å¢ƒç”µå•†æ”¯ä»˜äº§å“"},{id:"PROD009",name:"æŠ€æœ¯æœåŠ¡äº§å“"}],status:"active",createdAt:"2024-05-12"},{spName:"EX",spIdentifier:"SP006",spIdentity:"PP",tenantName:"IPL",tenantIdentifier:"TNT006",tenantIdentity:"TP",isSameName:!1,products:[{id:"PROD010",name:"æŠ€æœ¯æœåŠ¡äº§å“"}],status:"inactive",createdAt:"2024-06-18"},{spName:"TPé›†å›¢",spIdentifier:"SP008",spIdentity:"TP",tenantName:"APç§‘æŠ€",tenantIdentifier:"TNT008",tenantIdentity:"AP",isSameName:!1,products:[{id:"PROD016",name:"é«˜çº§ä»£ç†æœåŠ¡"},{id:"PROD017",name:"ä¸“å±žæŠ€æœ¯æ”¯æŒ"}],status:"active",createdAt:"2024-09-01"}],pagination:{currentPage:1,pageSize:10,total:0}}},computed:{filteredRelationList(){let i=this.spTeRelationList;return this.filters.spName&&(i=i.filter(e=>e.spName.toLowerCase().includes(this.filters.spName.toLowerCase()))),this.filters.tenantName&&(i=i.filter(e=>e.tenantName.toLowerCase().includes(this.filters.tenantName.toLowerCase()))),this.filters.productName&&(i=i.filter(e=>e.products.some(u=>u.name.toLowerCase().includes(this.filters.productName.toLowerCase())))),i}},methods:{handleViewDetails(i){this.$router.push("/main/monitor/sp-te-relations/detail")},handleSearch(){console.log("æœç´¢æ¡ä»¶:",this.filters),this.pagination.currentPage=1},handleReset(){this.filters={spName:"",tenantName:"",productName:""}},handleSizeChange(i){this.pagination.pageSize=i,this.pagination.currentPage=1},handleCurrentChange(i){this.pagination.currentPage=i},getIdentityTagType(i){return{PP:"primary",TP:"success",AP:"warning",SA:"info"}[i]||"info"},isValidSpIdentity(i){return i!=="AP"},isValidTenantIdentity(i){return!0},getSpIdentityErrorMessage(i,e){return i==="AP"?`${e}ä½œä¸ºè¢«ä»£ç†æ–¹ï¼Œä¸èƒ½å…·æœ‰APèº«ä»½`:""},getTenantIdentityErrorMessage(i,e){return""},isLegalRelation(i,e){return[["PP","TP"],["PP","SA"],["SA","TP"],["TP","AP"]].some(([f,d])=>f===i&&d===e)},getRelationErrorMessage(i,e){const u={"TP->PP":"ç§Ÿæˆ·æä¾›å•†ä¸èƒ½ä»£ç†äº§å“æä¾›å•†","SA->PP":"æœåŠ¡ä»£ç†ä¸èƒ½ä»£ç†äº§å“æä¾›å•†","AP->XX":"ä»£ç†æä¾›å•†ä¸èƒ½ä½œä¸ºè¢«ä»£ç†æ–¹","XX->AP":"é™¤ç§Ÿæˆ·æä¾›å•†å¤–ï¼Œå…¶ä»–èº«ä»½ä¸èƒ½ä»£ç†AP"},f=`${i}->${e}`;return f==="TP->PP"?u["TP->PP"]:f==="SA->PP"?u["SA->PP"]:i==="AP"?u["AP->XX"]:e==="AP"&&i!=="TP"?u["XX->AP"]:"æ­¤ä»£ç†å…³ç³»ç»„åˆä¸ç¬¦åˆä¸šåŠ¡è§„åˆ™"}}},D={class:"sp-te-relations"},x={class:"rules-content"},k={class:"identity-cell"},O={class:"identity-cell"},X={class:"legality-cell"};function B(i,e,u,f,d,s){const A=p("el-col"),b=p("el-row"),C=p("el-card"),y=p("el-input"),g=p("el-form-item"),_=p("el-button"),R=p("el-form"),o=p("el-table-column"),m=p("el-tag"),I=p("el-tooltip"),v=p("el-table"),L=p("el-pagination");return c(),T("div",D,[e[12]||(e[12]=t("div",{class:"page-header"},[t("h3",null,"ä»£ç†å…³ç³»è¯´æ˜Ž")],-1)),a(C,{class:"rules-card",style:{"margin-bottom":"20px"}},{header:l(()=>[...e[3]||(e[3]=[t("div",{class:"rules-header"},[t("i",{class:"el-icon-info",style:{color:"#409EFF","margin-right":"8px"}}),t("span",null,"ä»£ç†å…³ç³»èº«ä»½è§„åˆ™è¯´æ˜Ž")],-1)])]),default:l(()=>[t("div",x,[a(b,{gutter:20},{default:l(()=>[a(A,{span:12},{default:l(()=>[...e[4]||(e[4]=[t("div",{class:"rule-section"},[t("h4",null,"ðŸ”¹ åŸºæœ¬èº«ä»½é™åˆ¶"),t("ul",null,[t("li",null,[t("strong",null,"EXåªèƒ½æ˜¯SA")]),t("li",null,[t("strong",null,"IPLåªèƒ½æ˜¯TPæˆ–PP")]),t("li",null,[t("strong",null,"è¢«ä»£ç†æ–¹ä¸èƒ½æœ‰APèº«ä»½")]),t("li",null,[t("strong",null,"åªæœ‰ä»£ç†æ–¹å¯ä»¥æ˜¯AP")])])],-1)])]),_:1}),a(A,{span:12},{default:l(()=>[...e[5]||(e[5]=[t("div",{class:"rule-section"},[t("h4",null,"ðŸ”¹ åˆæ³•ä»£ç†å…³ç³»æ˜ å°„"),t("ul",null,[t("li",null,[t("strong",null,"PP â†’ TP"),r(" (äº§å“æä¾›å•† â†’ ç§Ÿæˆ·æä¾›å•†)")]),t("li",null,[t("strong",null,"PP â†’ SA"),r(" (äº§å“æä¾›å•† â†’ æœåŠ¡ä»£ç†)")]),t("li",null,[t("strong",null,"SA â†’ TP"),r(" (æœåŠ¡ä»£ç† â†’ ç§Ÿæˆ·æä¾›å•†)")]),t("li",null,[t("strong",{style:{color:"#E6A23C"}},"TP â†’ AP"),r(" (ç§Ÿæˆ·æä¾›å•† â†’ ä»£ç†æä¾›å•†)")])]),t("div",{class:"warning-note"},[t("i",{class:"el-icon-warning",style:{color:"#E6A23C","margin-right":"5px"}}),t("small",null,"æ³¨æ„ï¼šå…¶ä»–ç»„åˆå¦‚TPâ†’PPã€SAâ†’PPç­‰å‡ä¸å…è®¸")])],-1)])]),_:1})]),_:1})])]),_:1}),a(C,{class:"filter-card"},{default:l(()=>[a(R,{inline:!0,model:d.filters,class:"filter-form"},{default:l(()=>[a(g,{label:"è¢«ä»£ç†æ–¹"},{default:l(()=>[a(y,{modelValue:d.filters.spName,"onUpdate:modelValue":e[0]||(e[0]=n=>d.filters.spName=n),placeholder:"è¯·è¾“å…¥è¢«ä»£ç†æ–¹",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),a(g,{label:"ä»£ç†æ–¹åç§°"},{default:l(()=>[a(y,{modelValue:d.filters.tenantName,"onUpdate:modelValue":e[1]||(e[1]=n=>d.filters.tenantName=n),placeholder:"è¯·è¾“å…¥ä»£ç†æ–¹åç§°",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),a(g,{label:"ä»£ç†äº§å“åç§°"},{default:l(()=>[a(y,{modelValue:d.filters.productName,"onUpdate:modelValue":e[2]||(e[2]=n=>d.filters.productName=n),placeholder:"è¯·è¾“å…¥ä»£ç†äº§å“åç§°",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),a(g,null,{default:l(()=>[a(_,{type:"primary",onClick:s.handleSearch},{default:l(()=>[...e[6]||(e[6]=[r("æœç´¢",-1)])]),_:1},8,["onClick"]),a(_,{onClick:s.handleReset},{default:l(()=>[...e[7]||(e[7]=[r("é‡ç½®",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),a(v,{data:s.filteredRelationList,style:{width:"100%"},stripe:""},{default:l(()=>[a(o,{prop:"spName",label:"è¢«ä»£ç†æ–¹",width:"150"}),a(o,{prop:"spIdentifier",label:"è¢«ä»£ç†æ–¹æ ‡è¯†",width:"150"}),a(o,{prop:"spIdentity",label:"è¢«ä»£ç†æ–¹èº«ä»½",width:"180"},{default:l(({row:n})=>[t("div",k,[a(m,{type:s.getIdentityTagType(n.spIdentity),size:"small"},{default:l(()=>[r(P(n.spIdentity),1)]),_:2},1032,["type"]),s.isValidSpIdentity(n.spIdentity)?S("",!0):(c(),h(I,{key:0,content:s.getSpIdentityErrorMessage(n.spIdentity,n.spName),placement:"top"},{default:l(()=>[...e[8]||(e[8]=[t("i",{class:"el-icon-warning warning-icon"},null,-1)])]),_:1},8,["content"]))])]),_:1}),a(o,{prop:"tenantName",label:"ä»£ç†æ–¹åç§°",width:"150"}),a(o,{prop:"tenantIdentifier",label:"ä»£ç†æ–¹æ ‡è¯†",width:"150"}),a(o,{prop:"tenantIdentity",label:"ä»£ç†æ–¹èº«ä»½",width:"180"},{default:l(({row:n})=>[t("div",O,[a(m,{type:s.getIdentityTagType(n.tenantIdentity),size:"small"},{default:l(()=>[r(P(n.tenantIdentity),1)]),_:2},1032,["type"]),s.isValidTenantIdentity(n.tenantIdentity)?S("",!0):(c(),h(I,{key:0,content:s.getTenantIdentityErrorMessage(n.tenantIdentity,n.tenantName),placement:"top"},{default:l(()=>[...e[9]||(e[9]=[t("i",{class:"el-icon-warning warning-icon"},null,-1)])]),_:1},8,["content"]))])]),_:1}),a(o,{prop:"isSameName",label:"æ˜¯å¦åŒå",width:"120"},{default:l(({row:n})=>[a(m,{type:n.isSameName?"success":"info",size:"small"},{default:l(()=>[r(P(n.isSameName?"æ˜¯":"å¦"),1)]),_:2},1032,["type"])]),_:1}),a(o,{label:"å…³ç³»åˆæ³•æ€§",width:"120"},{default:l(({row:n})=>[t("div",X,[a(m,{type:s.isLegalRelation(n.spIdentity,n.tenantIdentity)?"success":"danger",size:"small"},{default:l(()=>[r(P(s.isLegalRelation(n.spIdentity,n.tenantIdentity)?"åˆæ³•":"éžæ³•"),1)]),_:2},1032,["type"]),s.isLegalRelation(n.spIdentity,n.tenantIdentity)?S("",!0):(c(),h(I,{key:0,content:s.getRelationErrorMessage(n.spIdentity,n.tenantIdentity),placement:"top"},{default:l(()=>[...e[10]||(e[10]=[t("i",{class:"el-icon-question info-icon"},null,-1)])]),_:1},8,["content"]))])]),_:1}),a(o,{prop:"products",label:"ä»£ç†äº§å“","min-width":"250"},{default:l(({row:n})=>[(c(!0),T(V,null,z(n.products,N=>(c(),T("div",{key:N.id,class:"product-item"},[a(m,{size:"small",style:{"margin-right":"5px","margin-bottom":"5px"}},{default:l(()=>[r(P(N.name),1)]),_:2},1024)]))),128))]),_:1}),a(o,{prop:"status",label:"çŠ¶æ€",width:"100"},{default:l(({row:n})=>[a(m,{type:n.status==="active"?"success":"warning",size:"small"},{default:l(()=>[r(P(n.status==="active"?"æ¿€æ´»":"æœªæ¿€æ´»"),1)]),_:2},1032,["type"])]),_:1}),a(o,{prop:"createdAt",label:"åˆ›å»ºæ—¶é—´",width:"150"}),a(o,{label:"æ“ä½œ",width:"120"},{default:l(({row:n})=>[a(_,{size:"small",type:"primary",onClick:N=>s.handleViewDetails(n)},{default:l(()=>[...e[11]||(e[11]=[r(" æŸ¥çœ‹è¯¦æƒ… ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a(L,{class:"pagination",onSizeChange:s.handleSizeChange,onCurrentChange:s.handleCurrentChange,"current-page":d.pagination.currentPage,"page-sizes":[10,20,50],"page-size":d.pagination.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:d.spTeRelationList.length},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])}const F=w(E,[["render",B],["__scopeId","data-v-5b4abbaa"]]);export{F as default};
